<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data: blob:; connect-src 'self';"
    />
    <!-- data: in font-src, connect-src self -->
    <title>Todo Wallpaper</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app-shell">
      <!-- App Header -->
      <header class="app-header">
        <div class="header-left">
          <h1 class="app-title">Todo Wallpaper</h1>
        </div>
        <div class="header-right">
          <button
            id="apply-wallpaper-btn"
            class="button button-primary"
            title="Apply current settings as wallpaper"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 16 16"
              fill="currentColor"
              width="16"
              height="16"
            >
              <path
                d="M8.75 2.75a.75.75 0 0 0-1.5 0v7.14L4.53 7.119a.75.75 0 0 0-1.06 1.06l3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L8.75 9.889V2.75Z"
              />
              <path
                d="M3.5 12.75a.75.75 0 0 0-1.5 0v.5A2.75 2.75 0 0 0 4.75 16h6.5A2.75 2.75 0 0 0 14 13.25v-.5a.75.75 0 0 0-1.5 0v.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-.5Z"
              />
            </svg>
            <span>Apply Wallpaper</span>
          </button>
          <button
            id="toggle-settings-btn"
            class="button button-secondary button-icon"
            title="Toggle Settings Panel (Alt+S)"
            aria-label="Toggle Settings Panel"
            aria-expanded="true"
          >
            <svg
              id="settings-icon-open"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 16 16"
              fill="currentColor"
              width="16"
              height="16"
            >
              <path
                fill-rule="evenodd"
                d="M6.94 4.036c.276 0 .524.105.71.291l.355.355A4.001 4.001 0 0 1 10.25 4a.75.75 0 0 1 .75.75V6h.944c.39 0 .74.21.92.533l.247.433a.75.75 0 0 1 0 .798l-.247.433a1.23 1.23 0 0 1-.92.533H11v1.207a4.013 4.013 0 0 1-2.24 3.453l-.355.355a.999.999 0 0 1-.71.291H7.5a1 1 0 0 1-1-1V4.536a.5.5 0 0 1 .44-.499Zm1.06 1.464v7.25h.25a.75.75 0 0 1 .75-.75 2.5 2.5 0 0 0 0-5 .75.75 0 0 1-.75-.75h-.25Z"
                clip-rule="evenodd"
              />
            </svg>
            <svg
              id="settings-icon-close"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 16 16"
              fill="currentColor"
              width="16"
              height="16"
              class="hidden"
            >
              <path
                d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"
              />
            </svg>
          </button>
        </div>
      </header>

      <!-- Main Content Area -->
      <main class="app-main">
        <!-- Todos Column -->
        <aside class="column column-todos">
          <div class="column-header">
            <h2 class="column-title">Tasks</h2>
            <button
              id="open-add-todo-modal-btn"
              class="button button-secondary button-icon"
              title="Add New Task (Ctrl+N)"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                width="16"
                height="16"
              >
                <path
                  d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"
                />
              </svg>
            </button>
          </div>
          <div class="todo-list-container scrollable-content">
            <ul id="todo-list"></ul>
          </div>
        </aside>

        <!-- Preview Column -->
        <section class="column column-preview">
          <div class="preview-area-container" id="preview-container">
            <img id="preview-area" alt="Wallpaper Preview" src="" />
            <canvas
              id="image-canvas"
              width="1920"
              height="1080"
              class="hidden"
            ></canvas>
          </div>
        </section>

        <!-- Settings Column -->
        <aside
          class="column column-settings"
          id="settings-column"
          data-collapsed="false"
        >
          <div class="column-header">
            <h2 class="column-title">Settings</h2>
          </div>
          <div class="scrollable-content">
            <div class="setting-section">
              <h3>Text & Layout</h3>
              <div class="input-group">
                <label for="wallpaper-title-input">Title</label>
                <input
                  type="text"
                  id="wallpaper-title-input"
                  class="input"
                  value="My Tasks"
                />
              </div>
              <div class="input-group">
                <label for="text-color">Text Color</label>
                <input
                  type="color"
                  id="text-color"
                  class="input-color"
                  value="#f3f4f6"
                />
              </div>
              <div class="input-group">
                <label for="font-size">Font Size</label>
                <input
                  type="number"
                  id="font-size"
                  class="input input-number"
                  value="48"
                  min="10"
                  max="200"
                />
              </div>
              <div class="input-group">
                <label for="list-style-select">List Style</label>
                <select id="list-style-select" class="select">
                  <option value="bullet">Bullet (â€¢)</option>
                  <option value="dash">Dash (-)</option>
                  <option value="number">Number (1.)</option>
                </select>
              </div>
              <div class="input-group">
                <label for="text-position">Position</label>
                <select id="text-position" class="select">
                  <option value="top-left">Top Left</option>
                  <option value="top-center">Top Center</option>
                  <option value="center-left">Center Left</option>
                  <option value="center">Center</option>
                  <option value="bottom-left">Bottom Left</option>
                  <option value="bottom-center">Bottom Center</option>
                  <option value="bottom-right">Bottom Right</option>
                </select>
              </div>
              <div class="input-group">
                <label for="text-align-select">Alignment</label>
                <select id="text-align-select" class="select">
                  <option value="left">Left</option>
                  <option value="center">Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="input-group">
                <label for="offset-x">Offset X</label>
                <input
                  type="number"
                  id="offset-x"
                  class="input input-number"
                  value="0"
                  step="5"
                />
              </div>
              <div class="input-group">
                <label for="offset-y">Offset Y</label>
                <input
                  type="number"
                  id="offset-y"
                  class="input input-number"
                  value="0"
                  step="5"
                />
              </div>
            </div>

            <!-- Font Settings Section -->
            <div class="setting-section">
              <h3>Font</h3>
              <div class="input-group">
                <label>Source</label>
                <div class="radio-group">
                  <label>
                    <input
                      type="radio"
                      name="font-source"
                      value="default"
                      id="font-source-default"
                      checked
                    />
                    Default
                  </label>
                  <label>
                    <input
                      type="radio"
                      name="font-source"
                      value="google"
                      id="font-source-google"
                    />
                    Google Font
                  </label>
                </div>
              </div>
              <div id="google-font-controls" class="hidden">
                <!-- Content flows into parent grid -->
                <div class="input-group">
                  <label for="google-font-url">URL</label>
                  <input
                    type="url"
                    id="google-font-url"
                    class="input"
                    placeholder="https://fonts.googleapis.com/css2?family=..."
                  />
                </div>
                <div class="input-group">
                  <!-- Button Group -->
                  <label></label>
                  <!-- Spacer -->
                  <button id="load-font-btn" class="button button-secondary">
                    Load Font
                  </button>
                </div>
                <div class="input-group">
                  <!-- Status Display -->
                  <label>Status</label>
                  <span id="font-status" class="font-status-display"
                    >Default: Inter</span
                  >
                </div>
              </div>
            </div>

            <!-- Background Settings Section -->
            <div class="setting-section">
              <h3>Background</h3>
              <div class="input-group">
                <label>Type</label>
                <div class="radio-group">
                  <label>
                    <input
                      type="radio"
                      name="bg-type"
                      value="color"
                      id="bg-type-color"
                      checked
                    />
                    Color
                  </label>
                  <label>
                    <input
                      type="radio"
                      name="bg-type"
                      value="image"
                      id="bg-type-image"
                    />
                    Image
                  </label>
                </div>
              </div>
              <div id="bg-color-controls" class="input-group">
                <label for="bg-color">Color</label>
                <input
                  type="color"
                  id="bg-color"
                  class="input-color"
                  value="#111827"
                />
              </div>
              <div id="bg-image-controls" class="input-group hidden">
                <label>Image</label>
                <span id="image-filename" class="filename-display"
                  >No file chosen</span
                >
                <div class="button-group">
                  <button id="choose-image-btn" class="button button-secondary">
                    Choose...
                  </button>
                  <button
                    id="clear-image-btn"
                    class="button button-danger button-icon"
                    title="Clear selected image"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 16 16"
                      fill="currentColor"
                      width="16"
                      height="16"
                    >
                      <path
                        d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"
                      />
                    </svg>
                  </button>
                </div>
                <input
                  type="file"
                  id="image-file-input"
                  accept="image/png, image/jpeg, image/webp"
                  class="hidden"
                />
              </div>
            </div>
          </div>
          <!-- End Scrollable Content -->
        </aside>
      </main>

      <!-- Add Todo Modal -->
      <div id="add-todo-modal" class="modal-overlay hidden">
        <div class="modal-content">
          <button
            id="modal-close-btn"
            class="modal-close-button button button-ghost button-icon"
            title="Close (Esc)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 16 16"
              fill="currentColor"
              width="16"
              height="16"
            >
              <path
                d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"
              />
            </svg>
          </button>
          <h2>Add New Task</h2>
          <form id="add-todo-form">
            <div class="input-group modal-input-group">
              <label for="modal-todo-input" class="sr-only"
                >Task description</label
              >
              <input
                type="text"
                id="modal-todo-input"
                class="input"
                placeholder="Enter task description..."
                required
              />
            </div>
            <div class="modal-actions">
              <button
                type="button"
                id="modal-cancel-btn"
                class="button button-secondary"
              >
                Cancel
              </button>
              <button type="submit" class="button button-primary">
                Add Task
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- End App Shell -->
    <script src="./renderer.js"></script>
  </body>
</html>
